language: ruby
cache: bundler

rvm:
  - 2.3.1

services:
  - postgresql

#bundler_args: --without development

before_script:
  - git clone https://github.com/BitGo/BitGoJS.git
  - cd BitGoJS && npm install
  - cd bin && chmod +x bitgo-express
  - ./bitgo-express --debug --port 3080 --env prod --bind localhost
  - cd ../../
  - cp config/application.travis.yml config/application.yml
  - psql -c 'create database weserve_development;' -U postgres
  - bundle exec rake db:setup
  - bundle exec rake db:migrate
  - bundle exec rake db:seed
  - bundle exec rake sunspot:solr:start

notifications:
  email: false
  slack: false