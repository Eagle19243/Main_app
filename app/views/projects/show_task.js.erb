$("#product-modal").html("<%= escape_javascript(render :partial => 'task_details') %>")
$("#myModal").css("display", "block");
$("#close").click(function () {
  $("#myModal").hide();
  $("#product-modal").html("");
});
$("#Do-request-form").submit(function () {
  $('#Do-request-form-response').html(" Requesting ...")
});
$("#comment-form").submit(function () {
});
$('.hide-input').hide()
$("#loading-mask1").hide();
$('a[name=delete_attachment]').click(function () {
  //alert($(this).attr('id'));
  var id = $(this).attr('id')
  $.ajax({
    url: "/task_attachments/destroy_attachment",
    type: "post", //send it through get method
    data: {id: id},
    success: function (response) {
      if (response == true) {
        alert('Successfully destroy ');
        location.reload();
      }
      else {
        alert('You are not authorized  to remove');
      }
    },
    error: function (xhr) {
      alert('You are not authorized  to remove');
    }
  });
});

<%  if user_signed_in? && (  ((current_user.id == @task.project.user_id || ( @task_memberships.collect(&:team_member_id).include? current_user.id)) && ( @task.pending? || @task.accepted?)) || ( current_user.id == @task.user_id && @task.suggested_task? )) %>
$('input[id^=file]').hide();
$('.fa-paperclip, .attachment').click(function () {
  console.log(this);
  $(this).closest('form').find('input[id^=file]').click();
  $("#upload-button").click();

})
$("#upload-button").hide();
$("#upload-button").click(function () {
  $("#upload-button").hide();
})

$("#task-title").dblclick(function () {
  $(this).hide();
  $("#task-update-title-form").show();
  $("#input-task-title").show();
  $("#task-update-title").hide();
  $("#task-update-title").next().hide();

});
$("#task-description").dblclick(function () {
  $(this).hide();
  $("#task-update-description-form").show();
  $("#input-task-description").show();
  $("#task-update-description").hide();
  $("#task-update-description").next().hide();

});
$("#task-condition").dblclick(function () {
  $(this).hide();
  $("#task-update-condition-form").show();
  $("#input-task-condition").show();
  $("#task-update-condition").hide();
  $("#task-update-condition").next().hide();

});
$("#task-proof").dblclick(function () {
  $(this).hide();
  $("#task-update-proof-form").show();
  $("#input-task-proof").show();
  $("#task-update-proof").hide();
  $("#task-update-proof").next().hide();

});

$('#input-task-title').keypress(function (e) {
  if (e.which == 13) {
    $("#task-update-title").click();
    $("#task-update-title-form").hide();
    $("#task-title").show();
  }
});
$('#input-task-description').keypress(function (e) {
  if (e.which == 13) {
    $("#task-update-description").click();
    $("#task-update-description-form").hide();
    $("#task-description").show();
  }
});
$('#input-task-proof').keypress(function (e) {
  if (e.which == 13) {
    $("#task-update-proof").click();
    $("#task-update-proof-form").hide();
    $("#task-proof").show();
  }
});
$('#input-task-condition').keypress(function (e) {
  if (e.which == 13) {
    $("#task-update-condition").click();
    $("#task-update-condition-form").hide();
    $("#task-condition").show();
  }
});


$("#edit-title").click(function () {
  $(this).hide();
  $("#task-update-title").show();
  $('#input-task-title').show();
  $("#task-update-title-form").show();
  $("#task-title").show();
  $("#cancel-title").show();

});
$("#edit-proof").click(function () {
  $(this).hide();
  $("#task-update-proof").show();
  $('#input-task-proof').show();
  $("#task-update-proof-form").show();
  $("#task-proof").show();
  $("#cancel-proof").show();

});
$("#edit-description").click(function () {
  $(this).hide();
  $("#task-update-description").show();
  $('#input-task-description').show();
  $("#task-update-description-form").show();
  $("#task-description").show();
  $("#cancel-description").show();
});
$("#edit-condition").click(function () {
  $(this).hide();
  $("#task-update-condition").show();
  $('#input-task-condition').show();
  $("#task-update-condition-form").show();
  $("#task-condition").show();
  $("#cancel-condition").show();
});
$("#cancel-title").click(function () {
  $(this).hide();
  $("#task-update-title").hide();
  $('#input-task-title').hide();
  $("#task-update-title-form").hide();
  $("#task-title").show();
  $('#edit-title').show();
});
$("#cancel-proof").click(function () {
  $(this).hide();
  $("#task-update-proof").hide();
  $('#input-task-proof').hide();
  $("#task-update-proof-form").hide();
  $("#task-proof").show();
  $("#edit-proof").show();
});
$("#cancel-description").click(function () {
  $(this).hide();
  $("#task-update-description").hide();
  $('#input-task-description').hide();
  $("#task-update-description-form").hide();
  $("#task-description").show();
  $("#edit-description").show();
});
$("#cancel-condition").click(function () {
  $(this).hide();
  $("#task-update-condition").hide();
  $('#input-task-condition').hide();
  $("#task-update-condition-form").hide();
  $("#task-condition").show();
  $("#edit-condition").show();
});
$("#task-update-title").click(function () {
  $(this).hide();
  $("#cancel-title").hide();
  $('#input-task-title').hide();
  $("#task-update-title-form").hide();
  $("#task-title").show();
  $('#edit-title').show();
});
$("#task-update-proof").click(function () {
  $(this).hide();
  $("#cancel-proof").hide();
  $('#input-task-proof').hide();
  $("#task-update-proof-form").hide();
  $("#task-proof").show();
  $("#edit-proof").show();
});
$("#task-update-description").click(function () {
  $(this).hide();
  $("#cancel-description").hide();
  $('#input-task-description').hide();
  $("#task-update-description-form").hide();
  $("#task-description").show();
  $("#edit-description").show();
});
$("#task-update-condition").click(function () {
  $(this).hide();
  $("#cancel-condition").hide();
  $('#input-task-condition').hide();
  $("#task-update-condition-form").hide();
  $("#task-condition").show();
  $("#edit-condition").show();
});
<% end  %>
// Get the modal
var modalinvite = document.getElementById('InviteModel');
// Get the button that opens the modal
var btninvite = document.getElementById("invbtn");
// Get the <span> element that closes the modal
var spaninvite = document.getElementById("inviteclose");
// When the user clicks the button, open the modal
btninvite.onclick = function () {
  modalinvite.style.display = "block";
}
// When the user clicks on <span> (x), close the modal
spaninvite.onclick = function () {
  modalinvite.style.display = "none";
}
// Get the modal
var modalshare = document.getElementById('share');
// Get the button that opens the modal
var btnshare = document.getElementById("sharebtn");
// Get the <span> element that closes the modal
var spanshare = document.getElementById("shareclose");
// When the user clicks the button, open the modal
btnshare.onclick = function () {
  modalshare.style.display = "block";
}
// When the user clicks on <span> (x), close the modal
spanshare.onclick = function () {
  modalshare.style.display = "none";
}
var modalteam = document.getElementById('team');
// Get the button that opens the modal
var btnteam = document.getElementById("teambtn");
// Get the <span> element that closes the modal
var spanteam = document.getElementById("teamclose");
btnteam.onclick = function () {
  modalteam.style.display = "block";
}
spanteam.onclick = function () {
  modalteam.style.display = "none";
}

var modal = document.getElementById('myModal');

var btn = document.getElementById("myBtn");

var span = document.getElementById("myModalclose");

btn.onclick = function () {
  modal.style.display = "block";
}

span.onclick = function () {
  modal.style.display = "none";
}

$(document).ready(function () {
  $(document).keydown(function (e) {
    if (e.keyCode == 27) {
      $("#myModal").hide();
      $("#share").hide();
      $("#team").hide();
      $("#suggested_task_popup").hide();
      $("#InviteModel").hide();
      $("#myModal2").hide();
      $("#popup-for-free-paid").hide();
    }
  });
})


window.onclick = function (event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
  if (event.target == modalinvite) {
    modalinvite.style.display = "none";
  }
  if (event.target == modalshare) {
    modalshare.style.display = "none";
  }
  if (event.target == modalteam) {
    modalteam.style.display = "none";
  }
}

$(function () {
  callAjax();
});

// function that processes your ajax calls...
function callAjax() {
  $.ajax({
    url: "/projects/get_activities",
    type: "get",
    data: {id: <%= @task.id %>},
    success: function () {
      setTimeout(callAjax, 15000);
    }
  });
}


